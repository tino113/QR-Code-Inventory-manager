{% extends 'base.html' %}
{% block content %}
<form method="get" class="mb-3">
  <input class="form-control mb-2" type="text" name="q" placeholder="Search" value="{{ request.args.get('q','') }}">
  <div class="row g-2">
    <div class="col"><input class="form-control" type="text" name="name" placeholder="Item name" value="{{ request.args.get('name','') }}"></div>
    <div class="col"><input class="form-control" type="number" name="quantity" placeholder="Quantity" value="{{ request.args.get('quantity','') }}"></div>
    <div class="col">
      <select class="form-select" name="location">
        <option value="">Location</option>
        {% for loc in all_locations %}
          <option value="{{ loc.id }}" {% if request.args.get('location')==loc.id|string %}selected{% endif %}>{{ loc.full_path() }}</option>
        {% endfor %}
      </select>
    </div>
    <div class="col">
      <select class="form-select" name="container">
        <option value="">Container</option>
        {% for c in all_containers %}
          <option value="{{ c.id }}" {% if request.args.get('container')==c.id|string %}selected{% endif %}>{{ c.contents or c.code }}</option>
        {% endfor %}
      </select>
    </div>
    <div class="col-auto"><button class="btn btn-primary" type="submit">Filter</button></div>
  </div>
</form>
<div class="accordion" id="inv-acc">
  <div class="accordion-item">
    <h2 class="accordion-header" id="headingItems">
      <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseItems">Items</button>
    </h2>
    <div id="collapseItems" class="accordion-collapse collapse show" data-bs-parent="#inv-acc">
      <div class="accordion-body p-0">
        <ul class="list-group list-group-flush">
        {% for item in items %}
          <li class="list-group-item bg-dark text-light"><span title="item">üìÑ</span> <a class="text-info" href="/item/{{ item.code }}">{{ item.name }}</a></li>
        {% endfor %}
        </ul>
      </div>
    </div>
  </div>
  <div class="accordion-item">
    <h2 class="accordion-header" id="headingContainers">
      <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseContainers">Containers</button>
    </h2>
    <div id="collapseContainers" class="accordion-collapse collapse" data-bs-parent="#inv-acc">
      <div class="accordion-body p-0">
        <ul class="list-group list-group-flush">
        {% for c in containers %}
          <li class="list-group-item bg-dark text-light"><span title="container">üì¶</span> <a class="text-info" href="/container/{{ c.code }}">{{ c.contents or c.code }}</a></li>
        {% endfor %}
        </ul>
      </div>
    </div>
  </div>
  <div class="accordion-item">
    <h2 class="accordion-header" id="headingLocations">
      <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseLocations">Locations</button>
    </h2>
    <div id="collapseLocations" class="accordion-collapse collapse" data-bs-parent="#inv-acc">
      <div class="accordion-body p-0">
        <ul class="list-group list-group-flush">
        {% for l in locations %}
          <li class="list-group-item bg-dark text-light"><span title="location">üìç</span> <a class="text-info" href="/location/{{ l.code }}">{{ l.full_path() }}</a></li>
        {% endfor %}
        </ul>
      </div>
    </div>
  </div>
</div>
<h3 class="mt-4">Missing Items</h3>
<ul>
{% for item in missing_items %}
  <li><a href="/item/{{ item.code }}">{{ item.name }}</a></li>
{% endfor %}
</ul>
<h3>Unaccounted Items</h3>
<ul>
{% for item in unaccounted %}
  <li><a href="/item/{{ item.code }}">{{ item.name }}</a></li>
{% endfor %}
</ul>
{% endblock %}
